{% extends "base.html" %}
{% block head %}
    <style>
    .node circle {
    fill: #fff;
    stroke: steelblue;
    stroke-width: 3px;
    }
    .node text {
    font: 12px sans-serif;
    }
    .link {
    fill: none;
    stroke: #eee;
    stroke-width: 2px;
    }
    </style>
{% endblock %}
{% block body %}
    <!-- load the d3.js library -->
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
    {# <script src="https://unpkg.com/vue"></script> #}
    <script src="{{ url_for('static', filename='vue.js')}}"></script>
    <script src="{{ url_for('static', filename='app.js')}}"></script>
    {# <section class="section"> #}
        <div class="container">
            <div class="columns" id="app-4">
                <div class="column is-one-quarter">
                    <aside class="menu">
                        <p class="menu-label">
                            Applications
                        </p>
                        <ul class="menu-list">
                            <li v-for="(application,index) in applications" v-on:click="showSVG">

                               <a>{% raw %}{{index}}-{{application.name}}{% endraw %}</a>
                            </li>
                        </ul>
                    </aside>
                </div>
                <div class="column is-three-quarters">

                </div>
            </div>
        </div>
        <script>
        var app4 = new Vue({
            el: '#app-4',
            data: {
                applications: {{tree | safe}}
            },
            methods: {
                showSVG: function(event) {
                    console.log("Here");
                    let index = parseInt(/(\d+)-.*/.exec(event.target.text));
                    draw_tree(this.applications[index]);
                }
            }
        })
        </script>
    {# </section> #}
    <a class="button is-info" id="save">Save as SVG</a>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.3/FileSaver.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
{% endblock %}